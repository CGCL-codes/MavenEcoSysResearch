import pickle
from matplotlib import pyplot as plt


def draw_plot(all_coverage:list):
    ###################Base setting#################
    graph, ax = plt.subplots(figsize=(5, 4), dpi=600)

    ###################Axis setting#################
    plt.grid(axis="y", alpha=0.4)
    plt.grid(axis="x", alpha=0.4)
    for i in range(1, 10, 2):
        ax.axhline(i * 0.1, linestyle='--', color="#CBCBCB", alpha=0.3)

    ###################Draw plot#################
    ax.hist(all_coverage, 30, edgecolor='black', linewidth=1, zorder=10, cumulative=True, density=True, color="#AAAAAA")
    plt.xlabel("Reachable ICFG Path Ratio", fontsize=20)
    plt.ylabel('Ratio of Path', fontsize=20)
    plt.yticks(fontsize=16)
    plt.xticks(fontsize=16)
    plt.savefig("./RQ2_exploit_path_ratio.png", bbox_inches='tight')


if __name__ == "__main__":
    with open("./raw_data/all_exploit_pt_ratio", "rb") as f:
        all_coverage = pickle.load(f)
    draw_plot(all_coverage)